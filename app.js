var dataObject = [
    { "id": "272822514",
        "firstName": "Billy",
        "lastName": "Bob",
        "gender": "male",
        "dob": "1/18/1949",
        "height": 71,
        "weight": 175,
        "eyeColor": "brown",
        "occupation": "programmer",
        "parents": [],
        "currentSpouse": "401222887",
    },
    { "id": "401222887",
        "firstName": "Uma",
        "lastName": "Bob",
        "gender": "female",
        "dob": "4/1/1947",
        "height": 65,
        "weight": 162,
        "eyeColor": "brown",
        "occupation": "assistant",
        "parents": [],
        "currentSpouse": "272822514",
    },
    { "id": "409574486",
        "firstName": "Michael",
        "lastName": "Walkens",
        "gender": "male",
        "dob": "5/9/1951",
        "height": 76,
        "weight": 250,
        "eyeColor": "brown",
        "occupation": "landscaper",
        "parents": [],
        "currentSpouse": 260451248
    },
    { "id" : "260451248",
        "firstName": "Jon",
        "lastName": "Walkens",
        "gender": "male",
        "dob": "9/6/1945",
        "height": 62,
        "weight": 115,
        "eyeColor": "brown",
        "occupation": "assistant",
        "parents": [],
        "currentSpouse": 409574486
    },
    {
        "id": "629807187",
        "firstName": "Jack",
        "lastName": "Pafoy",
        "gender": "male",
        "dob": "3/16/1938",
        "height": 70,
        "weight": 207,
        "eyeColor": "black",
        "occupation": "nurse",
        "parents": [],
        "currentSpouse": 464142841
    },
    {
        "id": "464142841",
        "firstName": "Jen",
        "lastName": "Pafoy",
        "gender": "female",
        "dob": "4/10/1940",
        "height": 72,
        "weight": 256,
        "eyeColor": "black",
        "occupation": "student",
        "parents": [],
        "currentSpouse": 629807187
    },
    {
        "id": "982411429",
        "firstName": "Mister",
        "lastName": "Potatoo",
        "gender": "male",
        "dob": "12/18/1952",
        "height": 66,
        "weight": 170,
        "eyeColor": "hazel",
        "occupation": "architect",
        "parents": [],
        "currentSpouse": 595767575
    },
    {
        "id":"595767575",
        "firstName": "Missuz",
        "lastName": "Potatoo",
        "gender": "female",
        "dob": "10/28/1948",
        "height": 59,
        "weight": 137,
        "eyeColor": "blue",
        "occupation": "architect",
        "parents": [],
        "currentSpouse": 982411429
    },
    {
        "id" : "693243224",
        "firstName": "Joy",
        "lastName": "Madden",
        "gender": "female",
        "dob": "4/20/1939",
        "height": 69,
        "weight": 199,
        "eyeColor": "hazel",
        "occupation": "doctor",
        "parents": [],
        "currentSpouse": 693243224
    },
    {
        "id":"888201200",
        "firstName": "Mader",
        "lastName": "Madden",
        "gender": "male",
        "dob": "5/6/1937",
        "height": 76,
        "weight": 205,
        "eyeColor": "black",
        "occupation": "landscaper",
        "parents": [],
        "currentSpouse": 888201200
    },
    {
        "id": "878013758",
        "firstName": "Jill",
        "lastName": "Pafoy",
        "gender": "Bob",
        "dob": "2/8/1972",
        "height": 74,
        "weight": 118,
        "eyeColor": "brown",
        "occupation": "programmer",
        "parents": [401222887,401222887],
        "currentSpouse": 294874671
    },
    {
        "id": "951747547",
        "firstName": "Ralph",
        "lastName": "Bob",
        "gender": "male",
        "dob": "12/23/1969",
        "height": 66,
        "weight": 179,
        "eyeColor": "blue",
        "occupation": "nurse",
        "parents": [401222887,401222887],
        "currentSpouse": 159819275
    },
    {
        "id": "159819275",
        "firstName": "Jasmine",
        "lastName": "Bob",
        "gender": "female",
        "dob": "12/18/1969",
        "height": 58,
        "weight": 156,
        "eyeColor": "blue",
        "occupation": "assistant",
        "parents": [409574486,260451248],
        "currentSpouse": 951747547
    },
    {
        "id": "348457184",
        "firstName": "Annie",
        "lastName": "Pafoy",
        "gender": "female",
        "dob": "11/4/1970",
        "height": 62,
        "weight": 235,
        "eyeColor": "hazel",
        "occupation": "landscaper",
        "parents": [629807187,464142841],
        "currentSpouse": null
    },
    {
        "id" : "294874671",
        "firstName": "Dave",
        "lastName": "Pafoy",
        "gender": "male",
        "dob": "8/5/1967",
        "height": 61,
        "weight": 112,
        "eyeColor": "green",
        "occupation": "doctor",
        "parents": [629807187,464142841],
        "currentSpouse": 878013758
    },
    {
        "id": "931247228",
        "firstName": "Amii",
        "lastName": "Pafoy",
        "gender": "female",
        "dob": "3/13/1963",
        "height": 74,
        "weight": 184,
        "eyeColor": "brown",
        "occupation": "landscaper",
        "parents": [629807187,464142841],
        "currentSpouse": null
    },
    { "id": "822843554",
        "firstName": "Regina",
        "lastName": "Madden",
        "gender": "female",
        "dob": "7/26/1959",
        "height": 71,
        "weight": 249,
        "eyeColor": "brown",
        "occupation": "nurse",
        "parents": [693243224, 888201200],
        "currentSpouse": null
    },
    {
        "id": "819168108",
        "firstName": "Hana",
        "lastName": "Madden",
        "gender": "female",
        "dob": "10/7/1953",
        "height": 70,
        "weight": 187,
        "eyeColor": "brown",
        "occupation": "politician",
        "parents": [693243224, 888201200],
        "currentSpouse": null
    },
    {
        "id":"969837479",
        "firstName": "Eloise",
        "lastName": "Madden",
        "gender": "female",
        "dob": "12/11/1961",
        "height": 63,
        "weight": 241,
        "eyeColor": "brown",
        "occupation": "assistant",
        "parents": [693243224, 888201200],
        "currentSpouse": null
    },
    {
        "id": "313207561",
        "firstName": "Mattias",
        "lastName": "Madden",
        "gender": "male",
        "dob": "2/19/1966",
        "height": 70,
        "weight": 110,
        "eyeColor": "blue",
        "occupation": "assistant",
        "parents": [693243224, 888201200],
        "currentSpouse": 313997561
    },
    {
        "id": "313997561",
        "firstName": "Ellen",
        "lastName": "Madden",
        "gender": "female",
        "dob": "2/19/1970",
        "height": 67,
        "weight": 100,
        "eyeColor": "blue",
        "occupation": "doctor",
        "parents": [],
        "currentSpouse": 313207561
    },
    {
        "id": "313998000",
        "firstName": "Joey",
        "lastName": "Madden",
        "gender": "female",
        "dob": "2/02/1987",
        "height": 67,
        "weight": 100,
        "eyeColor": "blue",
        "occupation": "doctor",
        "parents": [313207561,313997561],
        "currentSpouse": null,
    }
];


function initSearch(){
    var answer = "";
    var firstName = "";
    var lastName = "";
    var personalId = "";
    var lookingFor = "";
    var characteristic = "";
    var characteristics = [];

    while (!(answer == "yes" || answer == "no")){
        answer = prompt("Do you know who you are looking for? (yes or no)");
    }
    if(answer == "yes") {
        while(firstName == ""){
            firstName = prompt ("What's their first name?");
        }
        while(lastName == ""){
            lastName = prompt ("What's their last name?");
        }
        while(!(lookingFor == "1" || lookingFor == "2" || lookingFor == "3" || lookingFor == "4")){
            lookingFor=prompt("Are you looking for their (1) Info, (2) Descendants, (3) Family, or (4) Next of Kin. (Please type a number between 1-4)");
            //filter? can we use a for loop here with a filter?
        }switch(lookingFor){
            case "1":
                var infoResults = getInfo(firstName, lastName);
                var allInfo = " ID: " + infoResults[0]['id'] + " First Name: " + infoResults[0]['firstName'] + " Last Name: " + 
                infoResults[0]['lastName'] + " Gender: " + infoResults[0]['gender'] + " Date of Birth: " + infoResults[0]['dob'] + 
                " Height: " + infoResults[0]['height'] + " Weight: " + infoResults[0]['weight'] + " Eye Color: " + infoResults[0]['eyeColor'] +
                " Occupation: " + infoResults[0]['occupation'] + " Parents: " + infoResults[0]['parents'] + " Current Spouse: " +
                 infoResults[0]['currentSpouse'];
                alert(allInfo);
            break;
            case "2": 
                var infoResults = getInfo(firstName, lastName);
                var parent = infoResults[0];
                if (parent == undefined) {
                    alert('User not found.');
                    return;
                }
                var descendantResults = getDescendants(parent.id);
                if (descendantResults.length === 0) {
                    alert("There are no descendants");
                    return;
                }
                var output = "";
                for(var i = 0; i < descendantResults.length; i++) {
                    var descendant = descendantResults[i];
                    var personalId = " ID: " + descendant.id  + " First Name: " + descendant.firstName + " Last Name: " + descendant.lastName;
                    output+= personalId + "\r\n";
                }
                alert(output);
            break;
            case "3":
                var infoResults = getInfo (firstName, lastName);
                var personOfInterest = infoResults[0];
                if (personOfInterest === undefined) {
                    alert("User not found.");
                    return;
                }
                var parentsNameResults = getParents(personOfInterest.id);
                if (parentsNameResults.length === 0) {
                    alert("There are no parents");
                    return;
                }
                var parentsOutput = "";
                for(var i = 2; i < parentsNameResults.length; i++) {
                parentsOutput+= " ID: " + parentsNameResults[i].id + " First Name: " + parentsNameResults[i].firstName + " Last Name: " + parentsNameResults[i].lastName + "\r\n";
                }
                alert(parentsOutput); 


                if (personOfInterest.currentSpouse){
                    var spouseNameResults = getSpouse(personOfInterest.currentSpouse);
                } else {
                    alert("There is no spouse");
                    return;
                }
                var spouseOutput = "";
                for(var i = 0; i < spouseNameResults.length; i++) {
                spouseOutput+= " ID: " + spouseNameResults[i].id + " First Name: " + spouseNameResults[i].firstName + " Last Name: " + spouseNameResults[i].lastName + "\r\n";
                }
                alert(spouseOutput);


            break;
            case "4":
        }
    }else{
        alert("Please come back when you have more information.");
        return;
    }


 function getInfo(firstName, lastName) {
    var matches = [];
    for (var i = 0; i < dataObject.length; i++) {
        var user = dataObject[i];
        if (user.firstName.toLowerCase() == firstName.toLowerCase() && user.lastName.toLowerCase() == lastName.toLowerCase()) {
            matches.push(user);
        }
    }
    return matches;
}

function getDescendants(id){
    var descendants = [];
    console.log("checking for descendant of " + id);

    for (var i = 0; i < dataObject.length; i++) {
        //if the user's parents array contains id,
        //add this user to the results array,
        var user = dataObject[i];
        //-1 means what they entered doesn't exist in the array so this is saying
        //return only what exists in the array
        if (user.parents.indexOf(parseInt(id)) > -1) {
            descendants.push(user);
            var userIdToCheck = user.id;
            //TODO then retrieve THAT user's descendants
            var childDescendants = getDescendants(userIdToCheck);
            //TODO concat childDescendants into descendants
            descendants = descendants.concat(childDescendants);
        }
    }

    console.log('DESCENDANTS');
    console.log(descendants);
    return descendants;
}

function getParents(id){
    var motherAndFather = [];
    console.log("checking for id" + personOfInterest.id);

    for (var i = 0; i < dataObject.length; i++) {
         var user = dataObject[i];
         if (user.parents && user.id == id) {
            motherAndFather = user.parents;
         }
    }

    for (var j = 0; j < dataObject.length; j++) {
        var parentSearchUser = dataObject[j];
        if (user.parents.indexOf(parseInt(parentSearchUser.id)) > -1) {
        motherAndFather.push(parentSearchUser)
    }
}

    console.log('MOTHER AND FATHER');
    console.log(motherAndFather);
    return motherAndFather;
}


function getSpouse(spouseId){
    if(spouseId){

    for (var i = 0; i < dataObject.length; i++) {
        if (spouseId == dataObject[i].id){
        console.log (dataObject[i]);
        return dataObject[i];

            }
        }
    }
}


function getSiblings(firstName, lastName){
}



function getChildren(firstName, lastName){

}


   

    for (var i=0; i < 5; i++) {
        while(characteristic == ""){

            characteristic = prompt("Enter the characteristic of the person you are looking for");

            //ask all 5 characteristics up front then filter it
            //need switch case getFamily(firstName, lastName) getDescendants(firstName, lastName) getKin(firstName, LastName);

            //begin filtering characteristics
        }
        characteristics.push(characteristic);
        characteristic = "";
    }
}




function getKin(firstName, lastName){
    var getKinResults = "";
}
function filterPeople(characteristics){
    var filterPeopleResults = "";

}function responder(results){
    alert(results);
}

initSearch();


// function getGender(){
//     var yourSpouse = prompt("Do you know their current spouse?");
//     var yourGender = prompt("Do you know their gender?");
//     if (yourGender.length > 0) {
//       if (yourGender === 'male' || yourGender === 'female' || yourGender === 'unknown') {
//             return true;
//       } else {
//             return false;
//       }
//     } else {
//       return false;
//     }
// };
// getGender();




//     var yourBirth = prompt("Do you know their date of birth?");
//     var yourHeight = prompt("Do you know their height?");
//     var yourWeight = prompt("Do you know their weight?");
//     var yourEyeColor = prompt("Do you know their eye color?");
//     var yourOccupation = prompt("Do you know their occupation?");
//     var yourParents = prompt("Do you know their parents?");


